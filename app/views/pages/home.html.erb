<section>
  <div class="home-banner">
    <div class="hero__overlay"></div>
    <div class="hero__content">
      <div class="hero-text">
        <h1>SKAUTER</h1>
        <p>Book Albania's most cinematic filming locations</p>
      </div>
      <div class="hero-search">
        <div class="search-bar">

          <div class="search-field">
            <label class="search-label">What are you planning?</label>
            <div class="search-value">
              <i data-lucide="film"></i>
              <span>Film Production</span>
            </div>
          </div>

          <div class="search-field">
            <label class="search-label">Where?</label>
            <div class="search-value">
              <i data-lucide="building-2"></i>
              <span>Villas &amp; Estates</span>
            </div>
          </div>

          <div class="search-field">
            <label class="search-label">When?</label>
            <div class="search-value">
              <i data-lucide="calendar"></i>
              <span>Anytime</span>
            </div>
          </div>

          <div class="search-action">
            <button type="submit" class="search-button">
              <i data-lucide="search"></i>
              Search
            </button>
          </div>

        </div>
      </div>
    </div>
  </div>
</section>
<section class="why-albania">
  <div class="container">

    <header class="section-header">
      <h2>Why Albania?</h2>
      <p>3,000 years of history meets untamed natural beauty</p>
    </header>

    <div class="feature-grid">

      <div class="feature-card">
        <div class="feature-icon">
          <i data-lucide="map-pin"></i>
        </div>
        <h3>12 Counties</h3>
        <p>
          From the Accursed Mountains to the Ionian coast,
          every terrain imaginable.
        </p>
      </div>

      <div class="feature-card">
        <div class="feature-icon">
          <i data-lucide="film"></i>
        </div>
        <h3>31% Tax Incentive</h3>
        <p>
          Albania offers a competitive 31% film tax credit
          for qualified productions.
        </p>
      </div>

      <div class="feature-card">
        <div class="feature-icon">
          <i data-lucide="calendar"></i>
        </div>
        <h3>300 Days of Sun</h3>
        <p>
          Perfect weather conditions for year-round production.
        </p>
      </div>

    </div>
  </div>
</section>
<section class="home-regions">
  <div class="container">
    <header class="section-header">
      <h2>Explore by Region</h2>
      <p>Each county offers unique cinematic possibilities</p>
    </header>
    <div class="regions-grid">
      <% @counties.each do |county| %>
        <% if county.slug.present? %>
          <%= link_to region_path(county.slug), class: "region-card" do %>
            <div class="region-image">
              <% if county.cover_image.attached? %>
                <%= image_tag url_for(county.cover_image) %>
              <% else %>
                <%= image_tag "default.jpg", alt: county.name %>
              <% end %>

              <div class="overlay">
                <h3><%= county.name %></h3>
                <span>
                  <%= pluralize(county.locations_count.to_i, "location") %>
                </span>
              </div>
            </div>
          <% end %>
        <% end %>
      <% end %>
    </div>
  </div>
</section>

<div
  data-controller="map"
  data-map-api-key-value="<%= @mapbox_api_key %>"
  data-map-markers-value="<%= json_escape(@markers.to_json) %>"
  data-map-open-value="false">

  <button
    class="map-toggle-btn"
    data-action="click->map#toggle"
    aria-label="Toggle map">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none">
      <path d="M12 21C15.5 17.4 19 14.1764 19 10.2C19 6.22355 15.866 3 12 3C8.13401 3 5 6.22355 5 10.2C5 14.1764 8.5 17.4 12 21Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M12 13C13.6569 13 15 11.6569 15 10C15 8.34315 13.6569 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13Z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
  </button>

  <div class="map-panel" data-map-target="panel">
    <!-- HEADER -->
    <div class="map-header">
      <div>
        <h3>Explore Albania</h3>
        <span><%= @locations.count %> locations</span>
      </div>

      <button
        class="map-close-btn"
        data-action="click->map#toggle"
        aria-label="Close map">
        âœ•
      </button>
    </div>
    <div class="map" data-map-target="container"></div>
  </div>

</div>
